---
title: 'Sp√©cification technique'
description: "Vue d'ensemble de toutes les int√©ractions pour chaque feature de l'application"
---

<br />

## Gestion des utilisateurs

<Accordion title={"Cr√©ation de compte"}>
# üéØ Gestion des Utilisateurs ‚Äì Cr√©ation de Compte

## Front-end

#### Bouton "Cr√©er un compte":
  **Affiche un formulaire d'inscription avec les champs suivants :**

    - **Email** (obligatoire, format email, unique)
    - **Nom d‚Äôutilisateur** (obligatoire, plus de 3 caract√®res, unique)
    - **Mot de passe** (obligatoire, min. 8 caract√®res)
    - **Pays** (obligatoire, liste d√©roulante)
    - **Num√©ro de t√©l√©phone** (facultatif, format international)
    - **Photo de profil** (facultatif)
    - **Description** (facultatif)

  **Validation c√¥t√© client :**

  Email bien form√©
  Mot de passe suffisamment fort
  Champs obligatoires remplis

  **Soumission :**

  - Requ√™te `POST /api/register` envoy√©e avec les donn√©es utilisateur
  - R√©ception d‚Äôun email avec code de v√©rification
  - Une fois le code saisi, le compte est activ√©
  - L‚Äôutilisateur est automatiquement connect√©

## Back-end

    **Table** user :

        - id
        - email (unique)
        - username
        - first_name
        - last_name
        - password (sha256, unique)
        - country_id
        - phone_number

    **Contr√¥les** :

        - Unicit√© de l‚Äôemail, de nom d‚Äôutilisateur et du num√©ro de t√©l√©phone (si fourni)
        - Format des champs

    **Traitements** :

        - Hash du mot de passe avec SHA-256
        - Cr√©ation de l‚Äôutilisateur en base de donn√©es
        - Envoi d‚Äôun code de v√©rification par email
        - G√©n√©ration d‚Äôun token JWT une fois le compte v√©rifi√©
        - Stockage des pr√©f√©rences musicales (via un `PUT /api/user/preferences`)
</Accordion>

<Accordion title={"Connexion"}>
## Front-end

    **Bouton "Connexion"** :
        - Affiche un formulaire de connexion avec les champs suivants :

            - Adresse email **ou** nom d‚Äôutilisateur (obligatoire)
            - Mot de passe (obligatoire, masqu√©)

    **Validation c√¥t√© client** :

        - Champs non vides
        - Email bien form√© si utilis√©
        - Mot de passe correctement rempli

    **Soumission** :

        - Requ√™te `POST /api/login envoy√©e avec les identifiants


        - Si la connexion r√©ussit :

            - Stockage du token JWT
            - Redirection vers la page d‚Äôaccueil (fil d‚Äôactualit√©)

        - En cas d‚Äô√©chec :

            - Message d‚Äôerreur affich√© (ex. : identifiants incorrects ou email non v√©rifi√©)

## Back-end

    - **Route** : `POST /api/login`

    - **Contr√¥les** :

        - V√©rification de l‚Äôexistence du compte via email ou nom d‚Äôutilisateur

        - V√©rification que l‚Äôadresse email a √©t√© valid√©e

        - V√©rification du mot de passe (comparaison avec le hash stock√©)

    - **Traitements** :

        - Si toutes les conditions sont remplies :

            - G√©n√©ration d‚Äôun token JWT
            - Envoi d‚Äôinformations utiles sur l‚Äôutilisateur (nom, pr√©f√©rences, etc.)

    - **R√©ponses possibles** :

        - Connexion r√©ussie ‚Üí token JWT retourn√©, l‚Äôutilisateur est authentifi√©
        - Identifiants incorrects ‚Üí message d‚Äôerreur
        - Email non v√©rifi√© ‚Üí message d‚Äôavertissement
</Accordion>
<Accordion title={"D√©connexion"}>
## Front-end
    - **Bouton "D√©connexion"** accessible via le menu ou le profil

    - **Action** :

        - √Ä l‚Äôappui du bouton :

            - Suppression du token JWT du stockage local (localStorage / cookies)
            - Redirection vers la page de connexion ou d‚Äôaccueil non authentifi√©e


## Back-end
    - **Cas d‚Äôusage avec JWT** :

        - Aucun traitement serveur sp√©cifique si les tokens sont stateless

    - **Cas d‚Äôusage avec sessions (ex. via cookies)** :

        - Requ√™te `POST /api/logout` pour invalider la session c√¥t√© serveur
        - Suppression du cookie de session c√¥t√© client
</Accordion>

<Accordion title={"Modifier son profil"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®de √† la page de son profil
        - Il clique sur le bouton "Modifier le profil"

    - **Champs modifiables** :

        - Photo de profil (upload ou suppression)
        - Description (champ texte, limite de 300 caract√®res)
        - Genres musicaux favoris (liste modifiable par ajout ou suppression, max. 5)
        - Mot de passe
        - Pays

    - **Validation c√¥t√© client** :

        - Taille max. de la description : 300 caract√®res
        - Nombre de genres favoris ‚â§ 5
        - Format d‚Äôimage valide pour la photo (JPEG, PNG, etc.)
        - Si aucune photo n‚Äôest fournie, application d‚Äôune  **photo de profil par d√©faut**
         (exemple: initiales de l‚Äôutilisateur)
        - Mot de passe suffisamment puissant


    - **Soumission** :

        - Requ√™te `PUT /api/user/profile/:id` envoy√©e avec les modifications
        - Confirmation affich√©e √† l‚Äôutilisateur
        - Redirection ou retour visuel des nouvelles donn√©es


## Back-end

    - **Route** : <br />`PUT /api/user/profile/:id`
       <br />     `GET /api/user/profile/:id`
                  (r√©cup√©rer les information de l‚Äôutilisateur lorsque l‚Äôon est sur le profil)


    - **Contr√¥les** :

        - V√©rification de l‚Äôauthentification via token JWT
        - V√©rification de la validit√© des champs :

            - Description ‚â§ 300 caract√®res
            - Max. 5 genres musicaux
            - Fichier image valide pour la photo
            - Mot de passe
            - Pays


    - **Traitements** :

        - Mise √† jour des champs en base de donn√©es pour la table **users**
        - Les modifications sont enregistr√©es et imm√©diatement visibles (si le profil est public)
</Accordion>

<Accordion title={"Afficher ses genres musicaux pr√©f√©r√©s"}>
## Front-end
    - **Affichage sur le profil** :

        - Une section d√©di√©e affiche les **genres musicaux favoris**
        - Pr√©sentation sous forme de **tags interactifs** (ex. : Rock, Jazz, √âlectro)
        - Tags visibles uniquement si l‚Äôutilisateur concern√© a au moins un genre d√©fini

    - **Interaction** :

        - Cliquer sur un **tag de genre** d√©clenche une action :

            - Affiche une **liste de morceaux et playlists** correspondant au genre s√©lectionn√©
            - Donn√©es r√©cup√©r√©es via une requ√™te au back-end (ou moteur de recherche interne)



## Back-end
    - **Route** : `GET /api/user/:user/category`

        - Retourne la liste des genres musicaux favoris de l‚Äôutilisateur cibl√©

    - **Route compl√©mentaire** : `GET /api/genres/:category/playlist`

        - Retourne une liste de morceaux et playlists associ√©s √† un genre donn√©

    - **Contr√¥les** :

        - V√©rification que le profil cible est **public** (si applicable)
        - Si l‚Äôutilisateur cible n‚Äôa d√©fini aucun genre : la section est masqu√©e ou affiche un message vide
</Accordion>

<Accordion title={"Connecter plusieurs plateformes de streaming"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®s √† la section **‚ÄúPr√©f√©rences de plateforme‚Äù** depuis son profil

    - **Interaction** :

        - Il peut se connecter aux 3 plateformes d‚Äô√©coute pr√©sentes sur l‚Äôapplication (Spotify, Deezer ou Soundcloud)
        - Il clique sur l‚Äôune des plateformes pour lier son compte
        - Il est redirig√© vers l‚Äôinterface d‚Äô**authentification OAuth** de la plateforme choisie
        - Une fois l‚Äôacc√®s autoris√©, l‚Äôutilisateur est redirig√© vers l‚Äôapplication
        - Il peut √† tout moment annuler l‚Äôautorisation
        - Dans les **param√®tres du compte**, il peut choisir une des 3 applications en tant que plateforme principale d‚Äô√©coute

## Back-end
    - **Routes principales** :

        - `GET /api/streaming/list` ‚Üí Liste des plateformes compatibles
        - `POST /api/streaming/connect/:streaming` ‚Üí D√©but du processus de connexion OAuth
        - `GET /api/streaming/callback` ‚Üí Traitement de la redirection apr√®s autorisation
        - `GET /api/streaming/sync` ‚Üí Synchronisation des donn√©es musicales

    - **Traitements** :

        - Gestion du **flux OAuth 2.0** pour chaque plateforme
        - R√©cup√©ration et stockage des **tokens d‚Äôacc√®s et de rafra√Æchissement**
        - Stockage des tokens en base de donn√©e
        - Synchronisation initiale des donn√©es (playlists, morceaux, artistes)
</Accordion>

<Accordion title={"Suivre ses habitudes d'√©coute"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®de √† la section **"Statistiques"** depuis son profil

    - **Donn√©es affich√©es** :

        - **Nombre de morceaux √©cout√©s** :

            - Par jour, semaine, mois, ann√©e (selon la p√©riode s√©lectionn√©e)

        - **Top artistes** :

            - Liste des artistes les plus √©cout√©s, class√©s par nombre d‚Äô√©coutes

        - **Genre musical dominant** :

            - Affich√© sous forme de texte ou de graphique (ex. : diagramme circulaire)


        - **Heures d‚Äô√©coute totale** :

            - Affich√© sous forme de graphique avec au dessous le nombre d‚Äôheures total (ex. : diagramme en barre)

        - **Filtres disponibles** :

            - P√©riodes s√©lectionnables :

                - Derni√®res 24 heures
                - 7 derniers jours
                - Dernier mois
                - Derni√®re ann√©e

        - **Affichage interactif** :
            - Graphiques dynamiques (ex. : histogrammes, camemberts)

## Back-end

    - **Routes principales** :

        - `GET /api/user/:user/stats?period=7d` ‚Üí Retourne les donn√©es pour la p√©riode choisie


    - **Traitements** :

        - Agr√©gation des √©coutes √† partir des donn√©es synchronis√©es des plateformes
        - Calcul du **nombre total d‚Äô√©coutes** sur la p√©riode
        - Classement des artistes en fonction du volume d‚Äô√©coutes
        - D√©tection du genre musical dominant selon les m√©tadonn√©es des morceaux
    - **Mise √† jour des donn√©es** :
        - Synchronisation quotidienne avec les plateformes connect√©es
        - Donn√©es calcul√©es et mises √† jour automatiquement
</Accordion>

<Accordion title={"Comparer ses statistiques avec ses amis"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®de √† la section **"Statistiques"**
        - Il clique sur **"Comparer avec un ami"**

    - **S√©lection de l‚Äôami** :

        - Une **liste d√©roulante** des amis est propos√©e
        - L‚Äôutilisateur s√©lectionne un ami avec qui faire la comparaison

    - **Affichage comparatif** :

        - Un **tableau ou une carte interactive** affiche les donn√©es suivantes :

            - **Artistes communs** :

                - Liste des artistes que les deux utilisateurs √©coutent

            - **Nombre de morceaux √©cout√©s** :

                - Total sur la p√©riode s√©lectionn√©e pour chaque utilisateur

            - **Genres les plus √©cout√©s** :

                - Affich√©s en parall√®le ou en graphique crois√©

    - **Filtres** :

        - P√©riodes comparables :

            - 7 derniers jours
            - Dernier mois
            - 1 an


## Back-end

    - **Route** : `GET /api/user/:user/compare/:friend?period=1mo`

    - **Traitements** :

        - R√©cup√©ration des donn√©es d‚Äô√©coute de l‚Äôutilisateur et de l‚Äôami
        - Croisement des artistes √©cout√©s pour d√©tecter les **√©coutes communes**
        - Comparaison des **genres musicaux dominants**
        - Calcul du **score de compatibilit√© musicale** bas√© sur :

            - % d‚Äôartistes communs
            - % de genres musicaux similaires
            - Similarit√© dans la fr√©quence d‚Äô√©coute
</Accordion>

<Accordion title={"Param√®tres du compte"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®de √† son profil
        - Il clique sur la section **"Param√®tres"**

    - **Options modifiables** :

        - **Langue de l‚Äôapplication** :

            - Choix parmi les langues disponibles (fran√ßais ou anglais)
            - L‚Äôinterface s‚Äôadapte imm√©diatement √† la langue s√©lectionn√©e


        - **Notifications** :

            - Activer/d√©sactiver les **notifications push**

        - **Visibilit√© du profil** :


            - Option pour **mettre le profil en priv√© ou public**
            - Si priv√© : seules les personnes autoris√©es peuvent voir le profil et les donn√©es associ√©es


        - **Application pr√©f√©r√©es** :

            - On peut choisir notre application de musique pr√©f√©r√©e. On a le choix entre Spotify, Deezer et Soundcloud

    - **Sauvegarde** :

            - Les modifications sont envoy√©es via une requ√™te au back
            - Une confirmation visuelle est affich√©e une fois les param√®tres mis √† jour


## Back-end

    - **Route** : <br />`PUT /api/user/settings/:user
<br /> `GET /api/user/settings/:user`

    - **Contr√¥les** :

        - Authentification requise (token JWT valide)
        - Modifie dans la table `user_setting` les champs suivants :
            - is_private => pour avoir un compte priv√© ou non
            - notification_disabled => pour activer ou non les notifications type ‚Äúpush‚Äù
            - language => choix de la langue de l‚Äôapplication (fran√ßais ou anglais)
            - preferred_app => choix de l‚Äôapplication d‚Äô√©coute de musique favorite (Spotify, Deezer ou Soundcloud)

    - **Traitements** :

        - Mise √† jour des param√®tres utilisateur en base de donn√©es
        - Application imm√©diate ou au prochain chargement de session (selon les param√®tres)
</Accordion>

<Accordion title={"Badge & succ√®s (BONUS)"}>
## Front-end
    - **Acc√®s** :

        - L‚Äôutilisateur acc√®de √† son profil
        - Il clique sur la section **‚ÄúBadges & succ√®s‚Äù**

    - **Affichage** :

        - Liste des badges et succ√®s obtenus, chacun pr√©sent√© avec :

        - **Ic√¥ne ou visuel repr√©sentatif**
        - **Date d‚Äôobtention**
        - **Nom du badge ainsi qu‚Äôune description courte si l‚Äôon clique sur celui-ci** (ex. : ‚ÄúSucc√®s : Premier morceau lik√©‚Äù)

    - **Interaction** :

        - Cliquer sur un badge ou un succ√®s affiche :

            - Un **texte explicatif** indiquant comment l‚Äôutilisateur l‚Äôa obtenu ou pouvait l‚Äôobtenir
            - (Ex. : ‚ÄúAimer 10 morceaux pour d√©bloquer ce badge‚Äù)


##Back-end

    - **Route** : `GET /api/user/:user/badges`

        - Retourne la liste des badges ou succ√®s de l‚Äôutilisateur, avec les donn√©es suivantes :

            - Identifiant du badge
            - Nom
            - Description courte
            - Texte explicatif (d√©tail des conditions)
            - Date d‚Äôobtention

    - **Contr√¥les** :

        - V√©rification de l‚Äôauthentification si le profil est priv√©
        - Si le profil est public : les badges sont consultables par d‚Äôautres utilisateurs

    - **Stockage** :

        - Chaque badge est li√© √† une action pr√©cise d√©tect√©e c√¥t√© serveur (ex. : like, cr√©ation de playlist, √©coute quotidienne, etc.)
        - La date d‚Äôobtention est enregistr√©e lors de la validation de la condition
</Accordion>

## Abonnements

<Accordion title={"Suivre un utilisateur"}>
## Front-end

Pr√©requis :

    - Utilisateur connect√©
    - Acc√®s au profil d‚Äôun autre utilisateur

Interface utilisateur :

    - Bouton **"Suivre"** :

        - Affich√© si l'utilisateur cible **n‚Äôest pas encore suivi**
        - Passe en **"Abonn√©"** (ou "Ne plus suivre") apr√®s action r√©ussie

    - Bouton **"Ne plus suivre"** :

        - Affich√© si l'utilisateur est d√©j√† suivi

Actions utilisateur :

    - **Clic sur "Suivre"** :

        - Envoi d‚Äôun `POST` √† `/api/users/{username}/follow`
        - Mise √† jour imm√©diate du statut local (optimiste)
        - Affiche un message visuel ("Abonnement confirm√©")

    - **Clic sur "Ne plus suivre"** :

        - Envoie une requ√™te `DELETE` √† l‚ÄôAPI
        - Mise √† jour locale du statut

## Back-end

Route principale :

    - `POST /api/users/{username}/follow`

        - **Authentification requise (JWT)**
        - **V√©rifie l‚Äôexistence de l‚Äôutilisateur cible**
        - **V√©rifie que la relation n‚Äôexiste pas d√©j√†**
        - **Cr√©er une entr√©e dans la table follows**
        - **D√©clenche une notification de type new_follower**

    - `DELETE /api/users/{username}/unfollow`


        - **Authentification requise**
        - **Supprime l‚Äôentr√©e correspondante dans follows**

    - Contr√¥les serveur :

        - **L'utilisateur ne peut pas se suivre lui-m√™me**
        - **V√©rification de l'existence de l'utilisateur cible**
        - **Cl√© unique (follower_id, followed_id) pour √©viter les doublons**
</Accordion>

<Accordion title={"Ne plus suivre un utilisateur"}>
## Frontend

Bouton UI :

    - `"Ne plus suivre"` si utilisateur d√©j√† suivi

Comportement :
    - Envoi d‚Äôun `DELETE` √† `/api/users/{username}/unfollow`
    - Mise √† jour locale imm√©diate
    - Affichage d‚Äôun message : "Vous ne suivez plus cet utilisateur."

## Backend

Route : `DELETE /api/users/{username}/unfollow`

Traitement :

    - V√©rifie que la relation existe
    - Supprime la ligne (`follower_id`, `followed_id) dans follow
    - Aucun effet si la relation n‚Äôexistait pas
</Accordion>

<Accordion title={"Liste abonnements / abonn√©s"}>
## Frontend
    - L‚Äôonglet "Abonnements" affiche la liste des comptes suivis (`GET /api/users/{username}/following`)
    - L‚Äôonglet "Abonn√©s" affiche la liste des followers (`GET /api/users/{username}/followers`)


Si vide :

    - Bouton "Explorer des comptes" (si abonnements vides)
    - Message "Aucun abonn√© pour le moment" (si followers vides)

## Backend

Route : `GET /api/users/{username}/following`

Renvoie la liste des following
</Accordion>

<Accordion title={"Suggestions d'abonnement"}>
## Frontend

**UI** :

Dans l‚Äôonglet ‚ÄúAbonnements‚Äù

    - Suggestions de 3 comptes en haut

**Comportement** :

    - Appel √† `/api/users/suggestions` au chargement

## Backend

**Route** : `GET /api/users/suggestions`

**Traitement** :

    - Utilisateurs populaires (nb de followers > seuil)
    - Amis d‚Äôamis (mutual follow)
    - M√™mes pr√©f√©rences musicales
</Accordion>

## Publication de contenu

<Accordion title={"Cr√©ation de post"}>
## Front-end

Pr√©requis

    - Utilisateur connect√©
    - Application install√©e ou acc√®s web autoris√©
    - Autorisation d'acc√®s √† la galerie/cam√©ra

Interface utilisateur

    - **Bouton "Cr√©er un post" (+)** :
        - Ouvre la capsule de cr√©ation de post

    - **Formulaire de cr√©ation** :

        - S√©lection de musique (obligatoire) : Barre de recherche qui permet de s√©lectionner la musique correspondante:
            - plusieurs choix de musique selon la recherche
        - Photo d'accompagnement (optionnel) :

            - Prendre une photo/selfie avec l'appareil
            - S√©lectionner une photo existante dans la galerie
            - Recadrage ou rognage de la photo une fois prise ou s√©lectionn√©e

        - Description (optionnel) : Limite de 500 caract√®res
        - Localisation (optionnel)

Actions utilisateur

    - Bouton "Retour" :

        L'utilisateur peut revenir en arri√®re et quitter la capsule de publication

    - Bouton "Publier" :

        L'utilisateur clique et valide sa publication

## Back-end

    - Route principale:  `POST /api/posts`
    - Contr√¥les serveur

        **Validation des donn√©es** :

            - Musique: Obligatoire
            - Description : ‚â§ 500 caract√®res si fournie
            - Photo : Formats accept√©s JPG, PNG, GIF
            - Localisation : Optionnelle

    - Tables impact√©es :
        - Table **post**:
            - user_id (foreign key)
            - song_preview_url (varchar)
            - caption (varchar)
            - track (jsonb)
            - photo_url (varchar)
            - location (varchar)
            - updated_at (datetime)

Processus
    1. **Cr√©ation du post** :

        - S√©lection de musique (obligatoire)
        - Ajout description et photo (optionnel)
        - Ajout localisation (optionnel)

    2. **Validation** :

        - V√©rification de la r√©f√©rence musicale
        - Contr√¥le de la limite de caract√®res pour la description
        - Validation du format de photo

    3. **Publication** :

        - Le post est cr√©√© et appara√Æt dans le fil d'actualit√©
        - Apparition dans le feed des abonn√©s
</Accordion>

<Accordion title={"Modification de post"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©
    - Utilisateur auteur du post

**Interface utilisateur**

    - **Acc√®s √† la modification** :
        - Ic√¥ne "..." (options) visible sur le post de l'utilisateur
        - Option "Modifier" dans le menu d√©roulant

    - **Formulaire de modification** :
        - Champs pr√©-remplis avec les donn√©es existantes
        - Description (modifiable, limite 500 caract√®res)
        - Photo (modifiable) :
            - Supprimer la photo existante
            - Remplacer par une nouvelle photo (galerie/cam√©ra)
            - Recadrage disponible
        - Localisation (modifiable)
        - Musique associ√©e (non modifiable, affichage en lecture seule)

**Actions utilisateur**

    - **Bouton "Annuler"** :
        - Ferme le formulaire sans sauvegarder

    - **Bouton "Enregistrer les modifications"** :
        - Valide et sauvegarde les modifications

## Back-end

**Route principale**: `PUT /api/posts/{id}`

**Contr√¥les serveur**
        - V√©rification que l'utilisateur est l'auteur du post
        - Validation des donn√©es modifiables :
            - Description : ‚â§ 500 caract√®res si fournie
            - Photo : Formats accept√©s JPG, PNG, GIF
            - Localisation : Optionnelle
        - La r√©f√©rence musicale ne peut pas √™tre modifi√©e

**Tables impact√©es**
    - Table `posts` :
        - user_id
        - caption (mise √† jour)
        - photo_url (mise √† jour)
        - location (mise √† jour)
        - updated_at (mise √† jour automatique)

    - Table `post_history` (historique des modifications) :

        - post_id
        - field_name
        - old_value
        - new_value
        - modified_at
        - modified_by

**Processus**

    1. **V√©rification des droits** :

        - Contr√¥le que l'utilisateur connect√© est l'auteur

    2. **Sauvegarde de l'historique** :

        - Enregistrement des valeurs avant modification

    3. **Mise √† jour** :

        - Modification des champs autoris√©s uniquement
        - Mise √† jour du timestamp
</Accordion>

<Accordion title={"Suppresion de post"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©
    - Utilisateur auteur du post

**Interface utilisateur**

    - **Acc√®s √† la suppression** :
        - Ic√¥ne "..." (options) visible sur le post de l'utilisateur
        - Option "Supprimer" dans le menu d√©roulant

    - **Modale de confirmation** :
        - Message de confirmation : "√ätes-vous s√ªr de vouloir supprimer ce post ?"
        - Bouton "Annuler"
        - Bouton "Confirmer la suppression"

    - **Actions utilisateur**

        - **Bouton "Annuler"** :
            - Ferme la modale sans supprimer
        - **Bouton "Confirmer la suppression"** :
            - Proc√®de √† la suppression d√©finitive

## Back-end

**Route principale**: `DELETE /api/posts/{id}`

**Contr√¥les serveur**

    - V√©rification que l'utilisateur est l'auteur du post
    - V√©rification que le post existe

- **Tables impact√©es**

        - **Table** `posts` :
            - Suppression d√©finitive de l'enregistrement

        - **Tables li√©es** (suppression en cascade) :
            - Commentaires associ√©s
            - Likes associ√©s
            - Partages associ√©s

**Processus**

    1. **V√©rification des droits** :
        - Contr√¥le que l'utilisateur connect√© est l'auteur
    2. **Suppression** :
        - Suppression d√©finitive du post et de toutes ses interactions
        - Le post n'est plus disponible nulle part dans l'application
</Accordion>

<Accordion title={"Suppresion de post"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©
    - Utilisateur auteur du post

**Interface utilisateur**

    - **Acc√®s √† la suppression** :
        - Ic√¥ne "..." (options) visible sur le post de l'utilisateur
        - Option "Supprimer" dans le menu d√©roulant

    - **Modale de confirmation** :
        - Message de confirmation : "√ätes-vous s√ªr de vouloir supprimer ce post ?"
        - Bouton "Annuler"
        - Bouton "Confirmer la suppression"

**Actions utilisateur**

    - **Bouton "Annuler"** :
        - Ferme la modale sans supprimer
    - **Bouton "Confirmer la suppression"** :
        - Proc√®de √† la suppression d√©finitive

## Back-end

**Route principale** : `DELETE /api/posts/{id}`

**Contr√¥les serveur**

    - V√©rification que l'utilisateur est l'auteur du post
    - V√©rification que le post existe

**Tables impact√©es**

    - **Table** `posts` :
        - Suppression d√©finitive de l'enregistrement

    - **Tables li√©es** (suppression en cascade) :
        - Commentaires associ√©s
        - Likes associ√©s
        - Partages associ√©s

**Processus**

    1. **V√©rification des droits** :
        - Contr√¥le que l'utilisateur connect√© est l'auteur
    2. **Suppression** :
        - Suppression d√©finitive du post et de toutes ses interactions
        - Le post n'est plus disponible nulle part dans l'application
</Accordion>

<Accordion title={"Publication de Playlist Publique"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©
    - Au moins une playlist cr√©√©e ou import√©e
    - Playlist contenant au moins 3 titres

**Interface utilisateur**

    - **Acc√®s √† la publication** :
        - Section "Mes playlists"
        - Bouton "Publier la playlist" sur la playlist s√©lectionn√©e
    - **Formulaire de publication** :
        - Titre de la publication (pr√©rempli avec le nom de la playlist, modifiable)
        - Description (optionnel)
        - Image de couverture (optionnel, couverture de la playlist par d√©faut)
        - Tags (optionnel)
        - Param√®tres de collaboration :
            - Case √† cocher "Recevoir des notifications sur les interactions"
            - Case √† cocher "Permettre aux autres de sugg√©rer des titres"

**Actions utilisateur**

    - **Bouton "Annuler"** :
        - Ferme le formulaire sans publier
    - **Bouton "Publier"** :
        - Valide et publie la playlist

## Back-end

**Route principale** : `POST /api/playlists/{id}/publish`

**Contr√¥les serveur**

    - V√©rification que l'utilisateur est propri√©taire de la playlist
    - Validation que la playlist contient au moins 3 titres
    - Validation des donn√©es :
        - Titre : Obligatoire
        - Description : Optionnelle
        - Image de couverture : Format accept√© JPG, PNG, GIF
        - Tags : Optionnels

**Tables impact√©es**

    - **Table** `posts` :
        - id
        - author_id
        - type (playlist)
        - playlist_id
        - title
        - description
        - cover_image_url
        - tags
        - collaboration_settings
        - created_at
        - updated_at
    - **Table** `playlists` :
        - is_published (mise √† jour √† true)
        - published_at

**Processus**
    1. **Validation** :
        - V√©rification du nombre minimum de titres (3)
        - Contr√¥le des droits de propri√©t√©
    2. **Publication** :
        - Cr√©ation d'un post de type "playlist"
        - Mise √† jour du statut de la playlist
        - Apparition dans le profil de l'utilisateur
        - Apparition dans le fil d'actualit√© des abonn√©s

**R√®gles m√©tier**

    - Minimum 3 titres requis pour publication
    - Param√®tres de notification configurables
    - Param√®tres de collaboration configurables (suggestions de titres)
    - La playlist publi√©e reste modifiable par son propri√©taire
</Accordion>

## Fil d'actualit√©

<Accordion title={"Feed Utilisateur"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

- **Interface utilisateur**

    - **√âcran principal** :

        - Feed d'actualit√©s affich√© par d√©faut √† l'ouverture de l'application
        - Liste verticale des posts r√©cents

    - **Affichage des posts** :

        - Ordre chronologique invers√© (plus r√©cents en premier)
        - Chaque post comprend :
            - Musique associ√©e avec extrait ou lien vers plateforme de streaming
            - Description (si ajout√©e par l'auteur)
            - Photo d'accompagnement (si ajout√©e)
            - Informations de l'auteur (nom, photo de profil)
            - Localisation (si ajout√©e)
            - Horodatage de publication

    - **Navigation** :

        - D√©filement vertical pour parcourir les posts
        - Scroll infini : chargement automatique de nouveaux posts en atteignant le bas
        - Rafra√Æchissement par glissement vers le bas (pull-to-refresh)

**Actions utilisateur**

    - **D√©filement** :
        - Scroll vertical pour voir plus de posts
        - Chargement automatique sans bouton
    - **Rafra√Æchissement** :
        - Glissement vers le bas pour actualiser le contenu
    - **Interaction avec posts** :
        - Lecture des extraits musicaux
        - Acc√®s aux liens vers plateformes de streaming

## Back-end

**Route principale** : `GET /api/feed`

**Param√®tres de requ√™te**

    - `page` : Num√©ro de page (optionnel, d√©faut : 1)
    - `limit` : Nombre de posts par page (optionnel, d√©faut : 20)
    - `last_post_id` : ID du dernier post charg√© pour pagination (optionnel)

**Contr√¥les serveur**

    - V√©rification de l'authentification utilisateur
    - Validation des param√®tres de pagination
    - Contr√¥le des posts accessibles (non supprim√©s, auteurs non bloqu√©s)

**Tables impact√©es**

    - **Table** `posts` :

        - R√©cup√©ration des posts des utilisateurs suivis
        - Filtrage par _created_at_ (ordre chronologique invers√©)
        - Jointure avec _users_ pour informations auteur

    - **Table** `follows` :

        - D√©termination des utilisateurs suivis

    - **Table** `users` :

        - Informations des auteurs (nom, photo de profil)

**Processus**

    1. **Identification des sources** :

        - R√©cup√©ration de la liste des utilisateurs suivis

    2. **R√©cup√©ration des posts** :

        - Posts des utilisateurs suivis uniquement
        - Tri chronologique invers√©
        - Pagination avec limit/offset

    3. **Enrichissement des donn√©es** :

        - Informations compl√®tes de l'auteur
        - M√©tadonn√©es musicales
        - Statistiques d'interaction (likes, commentaires)

    4. **Formatage de la r√©ponse** :
        - Structure JSON avec tous les √©l√©ments d'affichage

**Optimisations**

    - Index sur (`author_id`, `created_at`) pour performance
    - Cache des utilisateurs suivis
    - Pagination cursor-based pour stabilit√©
    - Pr√©chargement des m√©tadonn√©es musicales

**Gestion des cas particuliers**

    - Utilisateur sans abonnements : feed vide ou suggestions
    - Posts supprim√©s : exclusion automatique
    - Auteurs bloqu√©s : filtrage des posts
    - Erreurs de streaming : affichage d√©grad√© sans preview
</Accordion>

## Interaction sociale

<Accordion title={"Like"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

**Interface utilisateur**

    - **Bouton Like** :
        - Ic√¥ne c≈ìur visible sur chaque post
        - Animation au clic : c≈ìur devient rouge
        - Feedback visuel imm√©diat

**Actions utilisateur**
    - **Clic sur l'ic√¥ne c≈ìur** :
        - Animation de changement de couleur (rouge)
        - Mise √† jour imm√©diate du compteur de likes
        - Possibilit√© de retirer le like (toggle)

## Back-end

**Routes principales**:

`POST /api/posts/{id}/like`
`DELETE /api/posts/{id}/like`

**Contr√¥les serveur**
    - V√©rification de l'authentification utilisateur
    - V√©rification de l'existence du post
    - Pr√©vention des likes multiples du m√™me utilisateur

**Tables impact√©es**

    - **Table** `likes` :

        - post_id
        - user_id
        - created_at

    - **Table** `notifications` :
        - recipient_id (auteur du post)
        - sender_id (utilisateur qui like)
        - type (like)
        - post_id
        - created_at

**Processus**

    1. **Ajout/Suppression du like** :

        - Insertion ou suppression dans la table likes

    2. **Notification** :

        - Cr√©ation d'une notification pour l'auteur du post
        - Envoi de la notification en temps r√©el
</Accordion>

<Accordion title={"Commentaire"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

**Interface utilisateur**

    - **Ic√¥ne commentaires** :
        - Ic√¥ne de bulle visible sur chaque post
        - Affichage du nombre de commentaires
    - **Section commentaires** :
        - Apparition en partie inf√©rieure de l'√©cran
        - Zone de texte pour √©crire un commentaire
        - Bouton "Publier"
        - Liste des commentaires existants d'autres utilisateurs
**Actions utilisateur**
    - **Clic sur l'ic√¥ne bulle** :
        - Ouverture de la section commentaires
    - **R√©daction et publication** :
        - Saisie du texte dans la zone
        - Clic sur "Publier" pour valider

## Back-end

**Routes principales** :

`POST /api/posts/{id}/comments`
`GET /api/posts/{id}/comments`

**Contr√¥les serveur**

    - V√©rification de l'authentification utilisateur
    - Validation du contenu du commentaire (non vide)
    - V√©rification de l'existence du post

**Tables impact√©es**

    - **Table** `comments` :
        - id
        - post_id
        - author_id
        - content
        - created_at

    - **Table** `notifications` :
        - Notification √† l'auteur du post

**Processus**

    1. **Cr√©ation du commentaire** :

        - Insertion dans la table comments

    2. Notification :

        - Notification √† l'auteur du post original

    3. Affichage :

        - R√©cup√©ration et affichage des commentaires
</Accordion>

<Accordion title={"Partage"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

**Interface utilisateur**

    - **Ic√¥ne partage** :
        - Ic√¥ne de t√©l√©chargement visible sur chaque post
    - **Section partage** :
        - Apparition en partie inf√©rieure de l'√©cran
        - Liste des contacts pour envoi direct
        - Option "Copier le lien" pour partage externe

**Actions utilisateur**

    - **Clic sur l'ic√¥ne t√©l√©chargement** :
        - Ouverture de la section partage
    - **Partage √† un contact** :
        - S√©lection d'un contact et envoi
    - **Copie du lien** :
        - G√©n√©ration et copie d'un lien partageable

## Back-end

**Route principale** :
`POST /api/posts/{id}/share`
`GET /api/posts/{id}/share-link`

**Contr√¥les serveur**

    - V√©rification de l'authentification utilisateur
    - V√©rification de l'existence du post
    - G√©n√©ration d'un lien de partage s√©curis√©

**Tables impact√©es**

    - **Table** `shares` :
        - post_id
        - user_id
        - share_type (contact/link)
        - created_at

**Processus**

    1. **Enregistrement du partage** :
        - Insertion dans la table shares

    2. **G√©n√©ration du lien** :
        - Cr√©ation d'un lien public vers le post

    3. **Envoi** :
        - Transmission √† un contact ou copie du lien
</Accordion>

<Accordion title={"Favori"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

**Interface utilisateur**

    - **Ic√¥ne favori** :
        - Ic√¥ne √©toile visible sur chaque post
        - Animation au clic : √©toile devient jaune

**Actions utilisateur**

    - **Clic sur l'ic√¥ne √©toile** :
        - Animation de changement de couleur (jaune)
        - Ajout/suppression du favori (toggle)

## Back-end

**Routes principales** :
`POST /api/posts/{id}/favorite`
`DELETE /api/posts/{id}/favorite`

**Contr√¥les serveur**

    - V√©rification de l'authentification utilisateur
    - V√©rification de l'existence du post
    - Pr√©vention des favoris multiples du m√™me utilisateur

**Tables impact√©es**

    - **Tables** `favorites` :
        - post_id
        - user_id
        - created_at

**Processus**

    1. **Ajout/Suppression du favori** :
        - Insertion ou suppression dans la table favorites

    2. **Mise √† jour des pr√©f√©rences** :
        - Mise √† jour du profil utilisateur
</Accordion>

<Accordion title={"Signalement"}>
## Front-end

**Pr√©requis**

    - Utilisateur connect√©

**Interface utilisateur**

    - **Bouton signalement** :
        - Accessible depuis le post ou le profil utilisateur

    - **Modale de signalement** :
        - Liste d√©roulante des raisons de signalement
        - Zone de texte pour explication compl√©mentaire
        - Bouton "Valider le signalement"
        - Message de confirmation apr√®s validation

**Actions utilisateur**

    - **Clic sur le bouton signaler** :
        - Ouverture de la modale

    - **S√©lection de la raison** :
        - Choix dans la liste d√©roulante

    - **Ajout d'explication** :
        - R√©daction optionnelle d'un texte explicatif

    - **Validation** :
        - Envoi du signalement et affichage du message de confirmation

## Back-end

**Route principale** :
- `POST /api/posts/{id}/report`
- `POST /api/users/{id}/report`

**Contr√¥les serveur**

    - V√©rification de l'authentification utilisateur
    - Validation de la raison de signalement
    - V√©rification de l'existence du post/utilisateur signal√©

**Tables impact√©es**

    - **Table** `reports` :
        - id
        - reporter_id
        - reported_type (post/user)
        - reported_id
        - reason
        - description
        - status (pending/reviewed/resolved)
        - created_at

**Processus**

    1. **Enregistrement du signalement** :
        - Insertion dans la table reports avec statut "pending"

    2. **Notification admin** :
        - Alerte pour mod√©ration

    3. **Confirmation** :
        - Message de prise en compte envoy√© √† l'utilisateur
</Accordion>

## Lecteur de musique

<Accordion title={"Lecture d'extraits musicaux"}>
## Front-end

**Pr√©requis**

    - Post contenant une r√©f√©rence musicale

**Interface utilisateur**

    - **Lecture automatique** :
        - D√©clenchement automatique lorsque l'utilisateur arrive sur le post
        - Dur√©e fixe de 30 secondes
        - D√©but obligatoire au commencement de la musique

    - **Indicateur visuel** :
        - Barre de progression de l'extrait
        - Visualisation du temps √©coul√©/restant

**Actions automatiques**

    - **Lancement automatique** :
        - D√©marrage d√®s l'affichage du post
        - Lecture depuis le d√©but de la piste

    - **Arr√™t automatique** :
        - Fin de lecture apr√®s 30 secondes
        - Arr√™t si l'utilisateur quitte le post

## Back-end

**Route principale** : `GET /api/posts/{id}/preview`

**Contr√¥les serveur**

    - V√©rification de l'existence du post
    - Validation de la disponibilit√© de l'extrait
    - R√©cup√©ration de l'URL de pr√©visualisation depuis la plateforme

**Tables impact√©es**

    - **Table** `posts` :
        - music_reference (contient preview_url)

    - **Table** `music_platforms` :
        - Configuration des URLs de preview par plateforme

**Processus**

    1. **R√©cup√©ration de l'extrait** :

        - Extraction de l'URL de preview depuis music_reference
        - Validation de la disponibilit√© sur la plateforme

    2. **Streaming** :
        - Fourniture de l'URL d'extrait de 30 secondes
        - Gestion des erreurs de disponibilit√©
</Accordion>

<Accordion title={"Contr√¥les de lecture de base"}>
## Front-end

**Pr√©requis**

    - Post contenant un extrait musical en cours de lecture

**Interface utilisateur**

    - **Activation des contr√¥les** :

        - Clic sur l'extrait musical pour afficher les contr√¥les

    - **Contr√¥les disponibles** :

        - Bouton Play/Pause
        - Barre de progression avec drag & drop pour navigation temporelle
        - Curseur de volume avec drag & drop
        - Temps √©coul√© et temps restant

    - **Interactions**

        - Navigation temporelle :Glissement sur la barre de progression
        - Contr√¥le du volume : Glissement sur le curseur de volume

**Actions utilisateur**

    - **Clic sur l'extrait** :

        - Affichage des contr√¥les de lecture

    - **Play/Pause** :

        - Basculement entre lecture et pause

    - **Navigation temporelle** :

        - D√©placement dans l'extrait via drag & drop

    - **Contr√¥le du volume** :

        - Ajustement du niveau sonore via drag & drop

## Back-end

**Route principale** : `PUT /api/users/playback-settings`

**Contr√¥les serveur**

    - Sauvegarde des pr√©f√©rences de volume utilisateur
    - M√©morisation de la position de lecture

**Tables impact√©es**

    - **Table** `user_preferences` :
        - user_id
        - default_volume
        - last_position

**Processus**

    1. **Gestion des pr√©f√©rences** :

        - Sauvegarde du niveau de volume pr√©f√©r√©
        - M√©morisation de la derni√®re position de lecture

    2. **Synchronisation** :

        - Application des pr√©f√©rences sur tous les extraits
</Accordion>

<Accordion title={"Interface persistante"}>
## Front-end

**Pr√©requis**

    - Extrait musical en cours de lecture
    - Utilisateur sur un post contenant un extrait musical

**Interface utilisateur**

    - **Ic√¥ne lecteur r√©duit** :

        - Bouton pour basculer en mode r√©duit

    - **Lecteur r√©duit** :

        - Interface minimale fixe √† l'√©cran
        - Persistant lors du d√©filement (scroll)
        - Affichage des informations de base : titre, artiste
        - Contr√¥les simplifi√©s : Play/Pause
        - Bouton croix pour fermer le lecteur

    - **Positionnement** :

        - Position fixe en bas de l'√©cran
        - Reste visible pendant la navigation

**Actions utilisateur**

    - **Clic sur l'ic√¥ne lecteur r√©duit** :

        - Passage en mode lecteur persistant
        - Maintien de la lecture en cours

    - **Navigation dans l'application** :

        - Lecteur reste visible pendant le scroll
        - Lecture continue

    - **Contr√¥les en mode r√©duit** :

        - Play/Pause disponible
        - Clic sur le lecteur pour revenir en mode complet

    - **Fermeture** :

        - Clic sur la croix pour arr√™ter et fermer

## Back-end

**Routes principales** :
`POST /api/users/playback-session`
`DELETE /api/users/playback-session`

**Contr√¥les serveur**

    - Gestion de la session de lecture persistante
    - Sauvegarde de l'√©tat de lecture

**Tables impact√©es**

    - **Table**`playback_sessions` :
        - user_id
        - post_id
        - current_position
        - is_playing
        - created_at

**Processus**

    1. **Cr√©ation de session** :
        - Enregistrement de la session de lecture persistante
        - Sauvegarde de la position actuelle

    2. **Maintien de l'√©tat** :
        - Synchronisation de la position de lecture
        - Gestion de la continuit√© entre les √©crans

    3. **Fin de session** :
        - Nettoyage lors de la fermeture du lecteur
        - Suppression de la session active
</Accordion>

## Syst√®me de messagerie

<Accordion title={"Messages textuels"}>
## Front-end

    - **Acc√®s :**

        - L‚Äôutilisateur acc√®de √† une **conversation priv√©e existante** via la section ‚ÄúMessages‚Äù
        - Il clique sur **"Nouvelle conversation"** pour en initier une avec un autre utilisateur

    - **Envoi de message :**

        - Il saisit le texte dans la zone de saisie pr√©vue
        - Il clique sur le bouton **"Envoyer"** ou utilise la touche **Entr√©e**

    - **Affichage du message :**

        - Le message s‚Äôaffiche instantan√©ment dans la conversation

        - Affiche :

            - **Contenu du message**
            - **Nom d‚Äôutilisateur**
            - **Horodatage** (date et heure d‚Äôenvoi)
            - **Indication "Modifi√©"** si le message a √©t√© modifi√© apr√®s l‚Äôenvoi

    **Options utilisateur :**

        - **Modifier un message** d√©j√† envoy√© (ic√¥ne ou menu contextuel)

            - Une mention **‚ÄúModifi√©‚Äù** appara√Æt automatiquement apr√®s modification

        - **Supprimer un de ses messages** (confirmation requise)

## Back-end

**Routes pour messages priv√©s (conversations entre utilisateurs):**

    - `POST /api/message` ‚Üí Envoi d‚Äôun nouveau message
    - `PUT /api/message/:message` ‚Üí Modification d‚Äôun message existant
    - `DELETE /api/message/:message` ‚Üí Suppression d‚Äôun message
    - `GET /api/conversation/:conversation` ‚Üí R√©cup√©ration de l‚Äôhistorique de conversation

**Contr√¥les :**

    - L‚Äôutilisateur doit :
        - √ätre **membre de la conversation** pour les messages priv√©s
        - √ätre **connect√©** pour commenter un post
    - L‚Äôutilisateur ne peut **modifier ou supprimer que ses propres messages/commentaires**
    - Les **modifications** et **suppressions** sont **horodat√©es** (timestamp d‚Äôaction)

    - **Tables impact√©es :**

        - `message` : stocke les messages des conversations priv√©es
</Accordion>
